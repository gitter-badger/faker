#!/usr/bin/env node
'use strict';

//var debug = require('debug')('test');
var connect = require('connect');
var vhost = require('vhost');

var config = require('./../configs/server');
var home = './../services/';

var app = connect();

// Listen different domains bind on the processors mapped in service-configs
config.vhosts.forEach(function(host){
	app.use(vhost(host.domain, require(home + host.service)));
});

app.listen(process.env.PORT || config.port);